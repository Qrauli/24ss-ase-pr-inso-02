<form [formGroup]="form">
  <div class="center">
    <h3>AnruferIn:</h3>
    <div formGroupName="caller">
      <mat-form-field >
        <mat-label>Nummer</mat-label>
        <input matInput placeholder="+43 000 00000000" formControlName="number"/>
      </mat-form-field>
      <mat-form-field style="margin-left: 5px;">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Max Mustermann"  formControlName="name"/>
      </mat-form-field>
    </div>
    <h3>Betroffene:</h3>
    <div>
      <mat-form-field>
        <mat-label>Anzahl der Betroffenen</mat-label>
        <input matInput type="number" placeholder="0" (keydown)="numberInputOnly($event)" formControlName="numberOfPatients" (blur)="updatePatients()" />
      </mat-form-field>
    </div>
    <div class="patient-table">
      <table mat-table [dataSource]="patients" class="mat-elevation-z8">

        <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->

        <!-- Age Column -->
        <ng-container matColumnDef="age">
          <th mat-header-cell *matHeaderCellDef> Alter</th>
          <td mat-cell *matCellDef="let element">
            <mat-form-field>
              <mat-label>Alter</mat-label>
              <input type="number" matInput placeholder="20" [(ngModel)]="element.age" [ngModelOptions]="{standalone: true}"/>
            </mat-form-field>
          </td>
        </ng-container>

        <!-- Sex Column -->
        <ng-container matColumnDef="sex">
          <th mat-header-cell *matHeaderCellDef> Geschlecht</th>
          <td mat-cell *matCellDef="let element">
            <mat-form-field>
              <mat-label>Geschlecht</mat-label>
              <mat-select [(value)]="element.sex">
                <mat-option value="MALE">Männlich</mat-option>
                <mat-option value="FEMALE">Weiblich</mat-option>
                <mat-option value="UNKNOWN">Unbekannt</mat-option>
              </mat-select>
            </mat-form-field>
          </td>
        </ng-container>

        <ng-container matColumnDef="remove">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <button mat-icon-button aria-label="Person entfernen" (click)="removePatient(element)">
              <mat-icon>delete</mat-icon>
            </button>
          </td>
        </ng-container>

        <tr mat-row *matRowDef="let row; columns: ['age', 'sex', 'remove'];"></tr>
      </table>
    </div>
    <button (click)="addPatient()" mat-icon-button aria-label="Person hinzufügen">
      <mat-icon>add</mat-icon>
    </button>

  </div>
</form>
